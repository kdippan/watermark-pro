<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor | Watermark Pro</title>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VSGKR6RTGQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VSGKR6RTGQ');
</script>
    <meta name="description" content="Watermark Pro Editor - Professional, client-side bulk photo watermarking tool. Add logos, text, and patterns securely in your browser.">
    <meta name="author" content="Dippan Bhusal">
    <meta name="keywords" content="photo editor, watermark tool, batch processing, privacy focused, javascript image editor">
    <meta name="robots" content="index, nofollow"> <meta property="og:title" content="Watermark Pro Editor">
    <meta property="og:description" content="Securely watermark your photos in the browser. No uploads required.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://watermark.dippanbhusal.tech/editor.html">
    <meta property="og:image" content="https://watermark.dippanbhusal.tech/ogg-watermarkpro.png">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:creator" content="@dippanbhusal">
    <meta name="twitter:image" content="https://watermark.dippanbhusal.tech/ogg-watermarkpro.png">

    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display&family=Roboto&family=Montserrat&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

    <style>
        /* Cookie Consent Box */
        .cookie-box {
            position: fixed; bottom: 20px; left: 20px; right: 20px; max-width: 400px;
            background: var(--bg-panel); color: var(--text); border: 1px solid var(--border);
            padding: 20px; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); z-index: 3000;
            display: none; animation: slideUp 0.5s ease;
        }
        @keyframes slideUp { from { transform: translateY(100px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .cookie-btns { display: flex; gap: 10px; margin-top: 15px; }
        
        /* Tour Tooltip */
        .tour-tooltip {
            position: absolute; background: var(--accent); color: white; padding: 15px;
            border-radius: 8px; width: 280px; z-index: 2000; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            display: none; font-size: 0.9rem; transition: top 0.3s, left 0.3s;
        }
        .tour-tooltip::after {
            content: ''; position: absolute; bottom: -6px; left: 20px;
            width: 12px; height: 12px; background: var(--accent); transform: rotate(45deg);
        }
        .tour-controls {
            display: flex; justify-content: space-between; margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 10px;
        }
        .tour-btn { background: rgba(255,255,255,0.2); border: none; color: white; padding: 5px 12px; border-radius: 4px; cursor: pointer; font-size: 0.8rem; }
        .tour-btn:hover { background: rgba(255,255,255,0.3); }

        /* Active Tour Highlight */
        .tour-active { box-shadow: 0 0 0 4px var(--accent) !important; position: relative; z-index: 1001; pointer-events: none; }
    </style>
</head>
<body>

    <div id="tourTooltip" class="tour-tooltip">
        <div id="tourText" style="line-height: 1.4;">Welcome</div>
        <div class="tour-controls">
            <button onclick="app.endTour()" class="tour-btn"><i class="fa-solid fa-xmark"></i> Skip</button>
            <button onclick="app.nextTourStep()" class="tour-btn">Next <i class="fa-solid fa-arrow-right"></i></button>
        </div>
    </div>

    <div id="cookieBox" class="cookie-box">
        <h3><i class="fa-solid fa-cookie-bite"></i> Privacy & Data</h3>
        <p style="font-size: 0.9rem; margin-top: 5px; color: var(--text-muted); line-height: 1.5;">
            We use <strong>LocalStorage</strong> to save your presets and history directly on your device. 
            No images are ever uploaded to our servers.
        </p>
        <div class="cookie-btns">
            <button onclick="app.acceptCookies()" class="btn-primary full-width">Accept & Continue</button>
        </div>
    </div>

    <div class="app-layout">
        
        <aside id="sidebarPanel" class="sidebar">
            <div class="brand">
                <img src="https://watermark.dippanbhusal.tech/logo-watermarkpro.png" alt="Watermark Pro" style="height:28px; width:auto;">
                <span style="margin-left: 10px;">Watermark Pro</span>
            </div>

            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('watermark')">Watermark</button>
                <button class="tab-btn" onclick="switchTab('settings')">Settings</button>
            </div>

            <div id="tab-watermark" class="tab-content active">
                <div class="control-group">
                    <h3>Add Layer</h3>
                    <div class="btn-grid">
                        <button onclick="app.addText()" class="btn-secondary"><i class="fa-solid fa-font"></i> Text</button>
                        <button onclick="document.getElementById('logoInput').click()" class="btn-secondary"><i class="fa-solid fa-image"></i> Logo</button>
                        <input type="file" id="logoInput" hidden accept="image/*">
                    </div>
                </div>

                <div id="layerProperties" class="control-group disabled">
                    <h3>Properties</h3>
                    <label>Text</label>
                    <input type="text" id="propText" placeholder="Edit text...">
                    
                    <label>Color</label>
                    <input type="color" id="propColor" value="#ffffff">
                    
                    <label>Opacity</label>
                    <input type="range" id="propOpacity" min="0" max="1" step="0.1">
                    
                    <label>Scale</label>
                    <input type="range" id="propScale" min="0.1" max="5" step="0.1">
                    
                    <div class="btn-grid">
                        <button onclick="app.centerObject()" title="Center"><i class="fa-solid fa-arrows-to-dot"></i></button>
                        <button onclick="app.toggleTile()" title="Tile Pattern"><i class="fa-solid fa-border-all"></i></button>
                        <button onclick="app.deleteObject()" title="Delete" class="btn-danger"><i class="fa-solid fa-trash"></i></button>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Presets</h3>
                    <div class="preset-controls">
                        <button onclick="app.savePreset()" class="btn-sm">Save Current</button>
                        <select id="presetSelect" onchange="app.loadPreset(this.value)">
                            <option value="">Load Preset...</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="tab-settings" class="tab-content">
                <div class="control-group">
                    <h3>Export Settings</h3>
                    <label>Format</label>
                    <select id="exportFormat">
                        <option value="image/jpeg">JPG</option>
                        <option value="image/png">PNG</option>
                        <option value="image/webp">WEBP</option>
                    </select>
                    <label>Quality</label>
                    <input type="range" id="exportQuality" min="10" max="100" value="90">
                </div>
                
                <div class="control-group">
                    <h3>Batch Queue</h3>
                    <ul id="batchList" class="batch-list">
                        <li class="empty">No images queued</li>
                    </ul>
                </div>
            </div>

            <div class="sidebar-footer">
                <button onclick="app.exportCurrent()" class="btn-primary full-width">Download Current</button>
                <button onclick="app.processBatch()" id="batchBtn" class="btn-accent full-width" disabled>Batch Process All</button>
            </div>
        </aside>

        <main class="workspace">
            
            <div id="mainToolbar" class="toolbar">
                <div id="tourUploadTarget" class="tool-group">
                    <button id="uploadBtn" onclick="document.getElementById('mainUpload').click()" class="btn-primary">
                        <i class="fa-solid fa-upload"></i> Upload
                    </button>
                    <input type="file" id="mainUpload" multiple accept="image/*" hidden>
                </div>
                
                <div class="tool-divider"></div>

                <div class="tool-group">
                    <button onclick="app.undo()" title="Undo"><i class="fa-solid fa-rotate-left"></i></button>
                    <button onclick="app.redo()" title="Redo"><i class="fa-solid fa-rotate-right"></i></button>
                </div>

                <div class="tool-divider"></div>

                <div class="tool-group">
                    <button onclick="app.setZoom(0.1)" title="Zoom In"><i class="fa-solid fa-magnifying-glass-plus"></i></button>
                    <button onclick="app.resetZoom()" title="Reset View">100%</button>
                    <button onclick="app.setZoom(-0.1)" title="Zoom Out"><i class="fa-solid fa-magnifying-glass-minus"></i></button>
                </div>

                <div class="tool-spacer"></div>

                <a href="index.html" class="icon-btn" title="Home" style="margin-right: 15px; text-decoration: none;">
                    <i class="fa-solid fa-house"></i>
                </a>
                <a href="history.html" class="icon-btn" title="View History" style="margin-right: 15px; text-decoration: none;">
                    <i class="fa-solid fa-clock-rotate-left"></i>
                </a>

                <button id="themeToggle" class="icon-btn" aria-label="Toggle Theme">
                    <i class="fa-solid fa-moon"></i>
                </button>
            </div>

            <div id="canvasContainer" class="canvas-container">
                <div id="dropZone" class="drop-zone">
                    <i class="fa-solid fa-images"></i>
                    <h2>Drag & Drop Images Here</h2>
                    <p>Supports JPG, PNG, WEBP</p>
                </div>
                <canvas id="c"></canvas>
            </div>

        </main>
    </div>

    <script src="app.js"></script>
    
    <script>
        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('tab-' + tab).classList.add('active');
            event.target.classList.add('active');
        }
    </script>

    <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="dippanbhusal" data-description="Support me on Buy me a coffee!" data-message="Thank you for Visiting. Please Support us for such type of Project's" data-color="#5F7FFF" data-position="Right" data-x_margin="18" data-y_margin="18"></script>
    
</body>
</html>
